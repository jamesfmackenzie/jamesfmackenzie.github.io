<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Understanding the Twitter API</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Tech, Programming, Agile, Software Engineering, Software, Hardware, Science, Video Games">
    <link rel="canonical" href="http://www.jamesfmackenzie.com/understanding-the-twitter-api">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link rel="stylesheet" href="/style.css">

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body id="page-top" class="index">
       <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">jamesfmackenzie</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
	    <!-- Header -->
    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <!--<img class="img-responsive" src="../img/projects/" alt="">-->
                    <div class="intro-text">
                        <span class="name">Understanding the Twitter API</span>
                        <hr class="star-light">
                        <span class="skills">Feb 25, 2015</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
	<section id="posts">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 text-center">
					<h2></h2>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<p>Want to schedule a Twitter post for later? Or re-post a message at the same time every day? To get the most out of Twitter, you’ll want to extend it via the <a href="https://dev.twitter.com/rest/public" target="_blank">Developer API</a>.</p>

<p>In the real world, I’d always recommend that you <a href="http://en.wikipedia.org/wiki/Standing_on_the_shoulders_of_giants" target="_blank">stand on the shoulders of giants</a> and find a <a href="https://dev.twitter.com/overview/api/twitter-libraries" target="_blank">Twitter Library</a> for your programming language of choice. But since this a learning exercise, we’re going to build everything from scratch in <a href="http://en.wikipedia.org/wiki/Shell_script" target="_blank">UNIX shell script</a>.</p>

<h3 id="step-1-create-an-app-in-the-twitter-application-management-portal">Step 1. Create an App in the Twitter Application Management Portal</h3>

<p>Head over to <a href="https://apps.twitter.com/" target="_blank">https://apps.twitter.com/</a>, login and click “Create New App”.</p>

<p>Choose a Name, Description, Website and Callback URL. Choose anything you like - even the Callback URL doesn’t matter at this point. Accept the Developer Agreement and click “Create your Twitter application”.</p>

<p><img src="/img/posts/Create_an_application___Twitter_Application_Management_1.png" alt="" /></p>

<h3 id="step-2-get-your-consumer-keys-and-access-tokens">Step 2. Get your Consumer Keys and Access Tokens</h3>

<p>On your application management page, navigate to the “Keys and Access Tokens” tab. Make a note of the “Consumer Key” and “Consumer Secret”. You’re going to need these.</p>

<p>Also note that the “Access Level” is Read-only by default. If you want you application to post Tweets, now is the time to change it to “Read and write”.</p>

<p><img src="/img/posts/jamesfmackenzie_com_Test_App___Twitter_Application_Management.png" alt="" /></p>

<p>Next, scroll to the bottom of the page and click “Create my access token”. This will generate an Access Token and Access Token Secret that let your new App make Twitter API calls on your account’s behalf. Make a note of these too.</p>

<p><img src="/img/posts/jamesfmackenzie_com_Test_App___Twitter_Application_Management_2.png" alt="" /></p>

<p>If you want your App to make API calls on behalf of <em>other users</em>, there’s a more complicated <a href="https://dev.twitter.com/web/sign-in/implementing" target="_blank">Authorization Process</a> your apps needs to follow. But we won’t go into it today.</p>

<p>Before we move on, let’s add these keys, tokens and secrets to our shell script as constants:</p>

<pre>
consumer_key="[YOUR CONSUMER TOKEN]"
consumer_secret="[YOUR CONSUMER TOKEN SECRET]"
access_token="[YOUR ACCESS TOKEN]"
access_token_secret="[YOUR ACCESS TOKEN SECRET]"
</pre>

<h3 id="step-3-establish-request-options">Step 3. Establish request options</h3>

<p>We’ve got all the tokens we need, but before making a request we need to choose a request method and the corresponding parameters.</p>

<p>You can see the full API listings <a href="https://dev.twitter.com/rest/public" target="_blank">here</a>, but for this example we’ll use <a href="https://dev.twitter.com/rest/reference/get/statuses/user_timeline" target="_blank">GET statuses/user_timeline</a>, which “returns a collection of the most recent Tweets posted by the user”.</p>

<p><strong>Mandatory Parameters</strong></p>

<ul>
  <li><strong>user_id</strong> OR <strong>screen_name</strong> - The ID or screen name of the user for whom to return results for</li>
</ul>

<p><strong>Optional Parameters</strong></p>

<ul>
  <li><strong>count</strong> - Specifies the number of tweets to try and retrieve, up to a maximum of 200 per distinct request</li>
</ul>

<p><strong>Method URL</strong></p>
<pre>
https://api.twitter.com/1.1/statuses/user_timeline.json
</pre>

<p><strong>Method Verb</strong></p>
<pre>
GET
</pre>

<h3 id="step-4-add-request-options-to-shell-script">Step 4. Add request options to shell script</h3>

<p>Now we’ve estabished the request options, let’s set these up as constants in our shell script too:</p>

<pre>
method_verb="GET"
method_url="https://api.twitter.com/1.1/statuses/user_timeline.json"
screen_name="[YOUR SCREEN NAME]"
count=5
</pre>

<h3 id="step-5-make-a-request">Step 5. Make a request</h3>

<p>OK, so we’ve got all the options, let’s make a request!</p>

<p><strong>Example Request</strong></p>
<pre>
GET
https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=jamesfmackenzie&amp;count=5
</pre>

<p><strong>Example Request (cURL)</strong></p>
<pre>
curl --get 'https://api.twitter.com/1.1/statuses/user_timeline.json' --data 'count=5&amp;screen_name=jamesfmackenzie'
</pre>

<p>Easy right? Well, not quite so easy. Issuing the request above yields the following response:</p>

<pre>
$ curl --get 'https://api.twitter.com/1.1/statuses/user_timeline.json' --data 'count=5&amp;screen_name=jamesfmackenzie'
<span style="background-color: yellow;">{"errors":[{"code":215,"message":"Bad Authentication data."}]}</span>
</pre>

<p>What went wrong? Well, it turns out that Twitter considers the above request invalid, because there’s no way of knowing:</p>

<ul>
  <li>Which application is making the request</li>
  <li>Which user the request is posting on behalf of</li>
  <li>Whether the user has granted the application authorization to post on the userÔÇÖs behalf</li>
  <li>Whether the request has been tampered by a third party while in transit</li>
</ul>

<p>For our request to work, we need to provide these details to Twitter in the form of an <em>Authorization Header</em>.</p>

<h3 id="step-6-collect-parameters-for-authorization-header">Step 6. Collect parameters for Authorization Header</h3>

<p>In their <a href="https://dev.twitter.com/oauth/overview/authorizing-requests" target="_blank">documentation</a>, Twitter provide the following Authorization Header as an example:</p>

<pre>
Authorization: OAuth
oauth_consumer_key="xvz1evFS4wEEPTGEFPHBog",
oauth_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg",
oauth_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D",
oauth_signature_method="HMAC-SHA1",
oauth_timestamp="1318622958",
oauth_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb",
oauth_version="1.0"
</pre>

<p>(Note: line breaks have been added for readability)</p>

<p>Let’s run through the parameters one-by-one, checking them off:</p>

<p><strong>oauth_consumer_key</strong></p>

<p>Easy. This is the consumer_key we created in Step 2.</p>

<p><strong>oauth_nonce</strong></p>

<p>According to the documentation, this is “a unique token your application should generate for each unique request” and “any approach which produces a relatively random alphanumeric string should be OK”.</p>

<p>For a one-off, you could just hammer away at the keyboard randomly. But a better approach is to generate the nonce. My approach:</p>

<ul>
  <li>Use <a href="https://www.openssl.org/" target="_blank">OpenSSL</a>’s rand function to generate a random base64 encoded string</li>
  <li>Use <a href="http://en.wikipedia.org/wiki/Sed" target="_blank">sed</a> to strip out the non-alphanumeric characters</li>
</ul>

<pre>
nonce=`openssl rand -base64 32 | sed -e s'/[+=/]//g'`
</pre>

<p><strong>oauth_signature</strong></p>

<p>Ugh! This is a nasty one. The signature is created by running all the other request parameters through an annoyingly specific signing algorithm. The parameters include:</p>

<ul>
  <li><strong>Method Verb</strong></li>
  <li><strong>Method URL</strong></li>
  <li><strong>Method Parameters</strong></li>
  <li><strong>All other Authorization Header parameters</strong> - i.e. oauth_consumer_key, oauth_nonce, oauth_signature_method, oauth_timestamp, oauth_token, oauth_version</li>
</ul>

<p>These parameters are then:</p>

<ul>
  <li><a href="http://en.wikipedia.org/wiki/Percent-encoding" target="_blank">Percent encoded</a></li>
  <li>Sorted alphabetically</li>
  <li>Concatenated</li>
  <li>Signed using the consumer_secret and access_token_secret defined in Step 2.</li>
</ul>

<p>If you want more detail you can find it <a href="https://dev.twitter.com/oauth/overview/creating-signatures" target="_blank">here</a>. My implementation is as follows:</p>

<pre>
# Use perl to percent encode the method url
percent_encoded_method_url=`echo ${method_url} | perl -MURI::Escape -ne 'chomp;print uri_escape($_),"\n"'`

# create signature base string (alphabetical sorting and some percent encoded is hardcoded)
signature_base_string="${method_verb}&amp;${percent_encoded_method_url}&amp;count%3D${count}%26oauth_consumer_key%3D${consumer_key}%26oauth_nonce%3D${nonce}%26oauth_signature_method%3D${oauth_signature_method}%26oauth_timestamp%3D${timestamp}%26oauth_token%3D${access_token}%26oauth_version%3D${oauth_version}%26screen_name%3D${screen_name}"

# create signature key
signature_key="${consumer_secret}&amp;${access_token_secret}"

# sign signature base string with signature key to generate signature
oauth_signature=`echo -n ${signature_base_string} | openssl dgst -sha1 -hmac ${signature_key} -binary | openssl base64 | sed -e s'/+/%2B/' -e s'/\//%2F/' -e s'/=/%3D/'`
</pre>

<p><strong>oauth_signature_method</strong></p>

<p>Easy peasy. This is always hardcoded to “HMAC-SHA1”.</p>

<pre>
oauth_signature_method="HMAC-SHA1"
</pre>

<p>Note: make sure this is declared above the oauth_signature declaration</p>

<p><strong>oauth_timestamp</strong></p>

<p>The number of seconds since UNIX epoch. You can use timestamp to generate this:</p>

<pre>
timestamp=`date +%s` 
</pre>

<p>Note: make sure this is declared above the oauth_signature declaration</p>

<p><strong>oauth_token</strong></p>

<p>This is the access_token we created in Step 2.</p>

<p><strong>oauth_version</strong></p>

<p>Last one (and an easy one). This is always hardcoded to “1.0”.</p>

<pre>
oauth_version="1.0"
</pre>

<p>Note: make sure this is declared above the oauth_signature declaration</p>

<h3 id="step-4-create-authorization-header">Step 4. Create Authorization Header</h3>

<p>Finally! Now we’ve got all the parameters together, we can switch them together to create the Authorization Header:</p>

<pre>
Authorization: OAuth
oauth_consumer_key="[YOUR CONSUMER KEY]",
oauth_nonce="[YOUR GENERATED NONCE]",
oauth_signature="[YOUR GENERATED SIGNATURE]",
oauth_signature_method="HMAC-SHA1",
oauth_timestamp="[YOUR GENERATED TIMESTAMP]",
oauth_token="[YOUR ACCESS TOKEN]",
oauth_version="1.0"
</pre>

<p>My implementation:</p>

<pre>
header="Authorization: OAuth oauth_consumer_key=\"${consumer_key}\", oauth_nonce=\"${nonce}\", oauth_signature=\"${oauth_signature}\", oauth_signature_method=\"${oauth_signature_method}\", oauth_timestamp=\"${timestamp}\", oauth_token=\"${access_token}\", oauth_version=\"${oauth_version}\""
</pre>

<h3 id="step-5-make-authenticated-requests-against-the-twitter-api">Step 5. Make Authenticated Requests Against the Twitter API</h3>

<p>All done! Now you’re ready to make authorized requests against the Twitter API.</p>

<p>To retrieve your 5 most recent Tweets using cURL:</p>

<pre>
result=`curl --get "${method_url}" --data "screen_name=${screen_name}&amp;count=${count}" --header "${header}"`
echo "${result}"
</pre>

<p><strong>Example Response</strong></p>
<pre>
[
   {
      "created_at":"Tue Feb 24 03:35:14 +0000 2015",
      "id":570064382656253952,
      "id_str":"570064382656253952",
      "text":"Oh, and current TVs don't support all the #4KBD features like HDR and expanded color gamut. If you want the best quality you should hold off",
      "source":"\u003ca href=\"http:\/\/twitter.com\/download\/iphone\" rel=\"nofollow\"\u003eTwitter for iPhone\u003c\/a\u003e",
      "truncated":false,
      "in_reply_to_status_id":null,
      "in_reply_to_status_id_str":null,
      "in_reply_to_user_id":null,
      "in_reply_to_user_id_str":null,
      "in_reply_to_screen_name":null,
      "user":{
         "id":165913533,
         "id_str":"165913533",
         "name":"James Mackenzie",
         "screen_name":"jamesfmackenzie",
         "location":"London",
         "profile_location":null,
         "description":"Science, Computers, Programming. All good.",
         "url":"http:\/\/t.co\/GUwCHWp6xx",
         "entities":{
            "url":{
               "urls":[
                  {
                     "url":"http:\/\/t.co\/GUwCHWp6xx",
                     "expanded_url":"http:\/\/www.jamesfmackenzie.com",
                     "display_url":"jamesfmackenzie.com",
                     "indices":[
                        0,
                        22
                     ]
                  }
               ]
            },
            "description":{
               "urls":[

               ]
            }
         },
         "protected":false,
         "followers_count":733,
         "friends_count":1375,
         "listed_count":31,
         "created_at":"Mon Jul 12 21:36:16 +0000 2010",
         "favourites_count":148,
         "utc_offset":0,
         "time_zone":"London",
         "geo_enabled":true,
         "verified":false,
         "statuses_count":1649,
         "lang":"en",
         "contributors_enabled":false,
         "is_translator":false,
         "is_translation_enabled":false,
         "profile_background_color":"666666",
         "profile_background_image_url":"http:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_image_url_https":"https:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_tile":true,
         "profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_link_color":"444444",
         "profile_sidebar_border_color":"FFFFFF",
         "profile_sidebar_fill_color":"DDEEF6",
         "profile_text_color":"333333",
         "profile_use_background_image":false,
         "default_profile":false,
         "default_profile_image":false,
         "following":false,
         "follow_request_sent":false,
         "notifications":false
      },
      "geo":null,
      "coordinates":null,
      "place":null,
      "contributors":null,
      "retweet_count":0,
      "favorite_count":0,
      "entities":{
         "hashtags":[
            {
               "text":"4KBD",
               "indices":[
                  42,
                  47
               ]
            }
         ],
         "symbols":[

         ],
         "user_mentions":[

         ],
         "urls":[

         ]
      },
      "favorited":false,
      "retweeted":false,
      "lang":"en"
   },
   {
      "created_at":"Tue Feb 24 03:29:59 +0000 2015",
      "id":570063061479874560,
      "id_str":"570063061479874560",
      "text":"100GB disk, 2 hour movie = 111Mbit\/s. So until your broadband\/wifi combo exceeds that, it's reasonable to expect better quality from #4KBD",
      "source":"\u003ca href=\"http:\/\/twitter.com\/download\/iphone\" rel=\"nofollow\"\u003eTwitter for iPhone\u003c\/a\u003e",
      "truncated":false,
      "in_reply_to_status_id":null,
      "in_reply_to_status_id_str":null,
      "in_reply_to_user_id":null,
      "in_reply_to_user_id_str":null,
      "in_reply_to_screen_name":null,
      "user":{
         "id":165913533,
         "id_str":"165913533",
         "name":"James Mackenzie",
         "screen_name":"jamesfmackenzie",
         "location":"London",
         "profile_location":null,
         "description":"Science, Computers, Programming. All good.",
         "url":"http:\/\/t.co\/GUwCHWp6xx",
         "entities":{
            "url":{
               "urls":[
                  {
                     "url":"http:\/\/t.co\/GUwCHWp6xx",
                     "expanded_url":"http:\/\/www.jamesfmackenzie.com",
                     "display_url":"jamesfmackenzie.com",
                     "indices":[
                        0,
                        22
                     ]
                  }
               ]
            },
            "description":{
               "urls":[

               ]
            }
         },
         "protected":false,
         "followers_count":733,
         "friends_count":1375,
         "listed_count":31,
         "created_at":"Mon Jul 12 21:36:16 +0000 2010",
         "favourites_count":148,
         "utc_offset":0,
         "time_zone":"London",
         "geo_enabled":true,
         "verified":false,
         "statuses_count":1649,
         "lang":"en",
         "contributors_enabled":false,
         "is_translator":false,
         "is_translation_enabled":false,
         "profile_background_color":"666666",
         "profile_background_image_url":"http:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_image_url_https":"https:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_tile":true,
         "profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_link_color":"444444",
         "profile_sidebar_border_color":"FFFFFF",
         "profile_sidebar_fill_color":"DDEEF6",
         "profile_text_color":"333333",
         "profile_use_background_image":false,
         "default_profile":false,
         "default_profile_image":false,
         "following":false,
         "follow_request_sent":false,
         "notifications":false
      },
      "geo":null,
      "coordinates":null,
      "place":null,
      "contributors":null,
      "retweet_count":0,
      "favorite_count":0,
      "entities":{
         "hashtags":[
            {
               "text":"4KBD",
               "indices":[
                  133,
                  138
               ]
            }
         ],
         "symbols":[

         ],
         "user_mentions":[

         ],
         "urls":[

         ]
      },
      "favorited":false,
      "retweeted":false,
      "lang":"en"
   },
   {
      "created_at":"Tue Feb 24 03:27:51 +0000 2015",
      "id":570062525519302656,
      "id_str":"570062525519302656",
      "text":"Nice primer on #4KBD. \"Ultra HD '4K' Blu-ray: Here's what we know\" http:\/\/t.co\/hiQYV94nxg",
      "source":"\u003ca href=\"http:\/\/bufferapp.com\" rel=\"nofollow\"\u003eBuffer\u003c\/a\u003e",
      "truncated":false,
      "in_reply_to_status_id":null,
      "in_reply_to_status_id_str":null,
      "in_reply_to_user_id":null,
      "in_reply_to_user_id_str":null,
      "in_reply_to_screen_name":null,
      "user":{
         "id":165913533,
         "id_str":"165913533",
         "name":"James Mackenzie",
         "screen_name":"jamesfmackenzie",
         "location":"London",
         "profile_location":null,
         "description":"Science, Computers, Programming. All good.",
         "url":"http:\/\/t.co\/GUwCHWp6xx",
         "entities":{
            "url":{
               "urls":[
                  {
                     "url":"http:\/\/t.co\/GUwCHWp6xx",
                     "expanded_url":"http:\/\/www.jamesfmackenzie.com",
                     "display_url":"jamesfmackenzie.com",
                     "indices":[
                        0,
                        22
                     ]
                  }
               ]
            },
            "description":{
               "urls":[

               ]
            }
         },
         "protected":false,
         "followers_count":733,
         "friends_count":1375,
         "listed_count":31,
         "created_at":"Mon Jul 12 21:36:16 +0000 2010",
         "favourites_count":148,
         "utc_offset":0,
         "time_zone":"London",
         "geo_enabled":true,
         "verified":false,
         "statuses_count":1649,
         "lang":"en",
         "contributors_enabled":false,
         "is_translator":false,
         "is_translation_enabled":false,
         "profile_background_color":"666666",
         "profile_background_image_url":"http:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_image_url_https":"https:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_tile":true,
         "profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_link_color":"444444",
         "profile_sidebar_border_color":"FFFFFF",
         "profile_sidebar_fill_color":"DDEEF6",
         "profile_text_color":"333333",
         "profile_use_background_image":false,
         "default_profile":false,
         "default_profile_image":false,
         "following":false,
         "follow_request_sent":false,
         "notifications":false
      },
      "geo":null,
      "coordinates":null,
      "place":null,
      "contributors":null,
      "retweet_count":0,
      "favorite_count":0,
      "entities":{
         "hashtags":[
            {
               "text":"4KBD",
               "indices":[
                  15,
                  20
               ]
            }
         ],
         "symbols":[

         ],
         "user_mentions":[

         ],
         "urls":[
            {
               "url":"http:\/\/t.co\/hiQYV94nxg",
               "expanded_url":"http:\/\/cnet.co\/1MNZmOo",
               "display_url":"cnet.co\/1MNZmOo",
               "indices":[
                  67,
                  89
               ]
            }
         ]
      },
      "favorited":false,
      "retweeted":false,
      "possibly_sensitive":false,
      "lang":"en"
   },
   {
      "created_at":"Mon Feb 23 18:12:01 +0000 2015",
      "id":569922641697640448,
      "id_str":"569922641697640448",
      "text":"Made me LOL because it's true. \"vi has two modes \u2013 'beep repeatedly' and 'break everything'\" http:\/\/t.co\/NauklKGvpi",
      "source":"\u003ca href=\"http:\/\/bufferapp.com\" rel=\"nofollow\"\u003eBuffer\u003c\/a\u003e",
      "truncated":false,
      "in_reply_to_status_id":null,
      "in_reply_to_status_id_str":null,
      "in_reply_to_user_id":null,
      "in_reply_to_user_id_str":null,
      "in_reply_to_screen_name":null,
      "user":{
         "id":165913533,
         "id_str":"165913533",
         "name":"James Mackenzie",
         "screen_name":"jamesfmackenzie",
         "location":"London",
         "profile_location":null,
         "description":"Science, Computers, Programming. All good.",
         "url":"http:\/\/t.co\/GUwCHWp6xx",
         "entities":{
            "url":{
               "urls":[
                  {
                     "url":"http:\/\/t.co\/GUwCHWp6xx",
                     "expanded_url":"http:\/\/www.jamesfmackenzie.com",
                     "display_url":"jamesfmackenzie.com",
                     "indices":[
                        0,
                        22
                     ]
                  }
               ]
            },
            "description":{
               "urls":[

               ]
            }
         },
         "protected":false,
         "followers_count":733,
         "friends_count":1375,
         "listed_count":31,
         "created_at":"Mon Jul 12 21:36:16 +0000 2010",
         "favourites_count":148,
         "utc_offset":0,
         "time_zone":"London",
         "geo_enabled":true,
         "verified":false,
         "statuses_count":1649,
         "lang":"en",
         "contributors_enabled":false,
         "is_translator":false,
         "is_translation_enabled":false,
         "profile_background_color":"666666",
         "profile_background_image_url":"http:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_image_url_https":"https:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_tile":true,
         "profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_link_color":"444444",
         "profile_sidebar_border_color":"FFFFFF",
         "profile_sidebar_fill_color":"DDEEF6",
         "profile_text_color":"333333",
         "profile_use_background_image":false,
         "default_profile":false,
         "default_profile_image":false,
         "following":false,
         "follow_request_sent":false,
         "notifications":false
      },
      "geo":null,
      "coordinates":null,
      "place":null,
      "contributors":null,
      "retweet_count":0,
      "favorite_count":0,
      "entities":{
         "hashtags":[

         ],
         "symbols":[

         ],
         "user_mentions":[

         ],
         "urls":[
            {
               "url":"http:\/\/t.co\/NauklKGvpi",
               "expanded_url":"http:\/\/bit.ly\/1CzDdh7",
               "display_url":"bit.ly\/1CzDdh7",
               "indices":[
                  93,
                  115
               ]
            }
         ]
      },
      "favorited":false,
      "retweeted":false,
      "possibly_sensitive":false,
      "lang":"en"
   },
   {
      "created_at":"Sun Feb 22 18:12:17 +0000 2015",
      "id":569560320810852353,
      "id_str":"569560320810852353",
      "text":"A really nice, structured collection of #AngularJS training resources. \"A Better Way to Learn AngularJS\" http:\/\/t.co\/utQMj52ZyZ",
      "source":"\u003ca href=\"http:\/\/bufferapp.com\" rel=\"nofollow\"\u003eBuffer\u003c\/a\u003e",
      "truncated":false,
      "in_reply_to_status_id":null,
      "in_reply_to_status_id_str":null,
      "in_reply_to_user_id":null,
      "in_reply_to_user_id_str":null,
      "in_reply_to_screen_name":null,
      "user":{
         "id":165913533,
         "id_str":"165913533",
         "name":"James Mackenzie",
         "screen_name":"jamesfmackenzie",
         "location":"London",
         "profile_location":null,
         "description":"Science, Computers, Programming. All good.",
         "url":"http:\/\/t.co\/GUwCHWp6xx",
         "entities":{
            "url":{
               "urls":[
                  {
                     "url":"http:\/\/t.co\/GUwCHWp6xx",
                     "expanded_url":"http:\/\/www.jamesfmackenzie.com",
                     "display_url":"jamesfmackenzie.com",
                     "indices":[
                        0,
                        22
                     ]
                  }
               ]
            },
            "description":{
               "urls":[

               ]
            }
         },
         "protected":false,
         "followers_count":733,
         "friends_count":1375,
         "listed_count":31,
         "created_at":"Mon Jul 12 21:36:16 +0000 2010",
         "favourites_count":148,
         "utc_offset":0,
         "time_zone":"London",
         "geo_enabled":true,
         "verified":false,
         "statuses_count":1649,
         "lang":"en",
         "contributors_enabled":false,
         "is_translator":false,
         "is_translation_enabled":false,
         "profile_background_color":"666666",
         "profile_background_image_url":"http:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_image_url_https":"https:\/\/pbs.twimg.com\/profile_background_images\/668567178\/9627556962007cb48e3344e03dd8a374.png",
         "profile_background_tile":true,
         "profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/531419563422801921\/sdtKDzv4_normal.png",
         "profile_link_color":"444444",
         "profile_sidebar_border_color":"FFFFFF",
         "profile_sidebar_fill_color":"DDEEF6",
         "profile_text_color":"333333",
         "profile_use_background_image":false,
         "default_profile":false,
         "default_profile_image":false,
         "following":false,
         "follow_request_sent":false,
         "notifications":false
      },
      "geo":null,
      "coordinates":null,
      "place":null,
      "contributors":null,
      "retweet_count":1,
      "favorite_count":2,
      "entities":{
         "hashtags":[
            {
               "text":"AngularJS",
               "indices":[
                  40,
                  50
               ]
            }
         ],
         "symbols":[

         ],
         "user_mentions":[

         ],
         "urls":[
            {
               "url":"http:\/\/t.co\/utQMj52ZyZ",
               "expanded_url":"http:\/\/bit.ly\/1v47RiB",
               "display_url":"bit.ly\/1v47RiB",
               "indices":[
                  105,
                  127
               ]
            }
         ]
      },
      "favorited":false,
      "retweeted":false,
      "possibly_sensitive":false,
      "lang":"en"
   }
]
</pre>

<p>That’s it! I hope to make use of the Twitter API over the next few weeks and post something interesting/useful.</p>

<h3 id="full-code-listing">Full code listing</h3>
<pre>
#!/bin/bash

consumer_key="Bg6pHWiVYhmi3y79ZuBMQ"
consumer_secret="eSZxN15yTlqoxpbhOdM6SWHERi8VqiU8TVs4VZtPc"
access_token="165913533-p7glGCmvZyapIGW7sk2kIGzTygNrqfWOG9FfJBJr"
access_token_secret="bwYnLDcv4SsVw9lEubsFfmvph2ZunpdJdyOBQqBJGODbd"

method_verb="GET"
method_url="https://api.twitter.com/1.1/statuses/user_timeline.json"
screen_name="jamesfmackenzie"
count=5

nonce=`openssl rand -base64 32 | sed -e s'/[+=/]//g'`

oauth_version="1.0"

oauth_signature_method="HMAC-SHA1"

timestamp=`date +%s` 

# Use perl to percent encode the method url
percent_encoded_method_url=`echo ${method_url} | perl -MURI::Escape -ne 'chomp;print uri_escape($_),"\n"'`

# create signature base string (alphabetical sorting and some percent encoded is hardcoded)
signature_base_string="${method_verb}&amp;${percent_encoded_method_url}&amp;count%3D${count}%26oauth_consumer_key%3D${consumer_key}%26oauth_nonce%3D${nonce}%26oauth_signature_method%3D${oauth_signature_method}%26oauth_timestamp%3D${timestamp}%26oauth_token%3D${access_token}%26oauth_version%3D${oauth_version}%26screen_name%3D${screen_name}"
echo "${signature_base_string}"

# create signature key
signature_key="${consumer_secret}&amp;${access_token_secret}"
echo "${signature_key}"

# sign signature base string with signature key to generate signature
oauth_signature=`echo -n ${signature_base_string} | openssl dgst -sha1 -hmac ${signature_key} -binary | openssl base64 | sed -e s'/+/%2B/' -e s'/\//%2F/' -e s'/=/%3D/'`
echo "${oauth_signature}"

header="Authorization: OAuth oauth_consumer_key=\"${consumer_key}\", oauth_nonce=\"${nonce}\", oauth_signature=\"${oauth_signature}\", oauth_signature_method=\"${oauth_signature_method}\", oauth_timestamp=\"${timestamp}\", oauth_token=\"${access_token}\", oauth_version=\"${oauth_version}\""
echo "${header}"

result=`curl --get "${method_url}" --data "screen_name=${screen_name}&amp;count=${count}" --header "${header}"`
echo "${result}"
</pre>

				</div>
			</div>
		</div>
	</section>
        <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3></h3>
                        <p>
                            
                        </p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Social</h3>
                        <ul class="list-inline">
                            
                            <li>
                                <a href="http://twitter.com/jamesfmackenzie" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                            </li>
		                    
                            <li>
                                <a href="http://stackoverflow.com/users/4958467/jamesfmackenzie" class="btn-social btn-outline"><i class="fa fa-fw fa-stack-overflow"></i></a>
                            </li>
		                    
                            <li>
                                <a href="http://github.com/jamesfmackenzie" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
		                    
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3></h3>
                        <p></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; James Mackenzie 2015
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

     <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/js/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    
    <script src="/js/contact_me_static.js"></script>
    

    <!-- Custom Theme JavaScript -->
    <script src="/js/freelancer.js"></script>
	
	<!-- Google Analytics Tracking Code -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');		
		ga('create', 'UA-65863388-1', 'auto');
		ga('send', 'pageview');
	</script>

    </body>
</html>